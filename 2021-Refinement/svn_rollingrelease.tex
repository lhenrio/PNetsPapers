\begin{tikzpicture}

\node[state,initial] (v0) at (0,0) {i};
\node[state] (vd1) at (0,2.5) {d1};
\node[state] (vd2) at (0,-2.5) {d2};
\node[state] (vop) at (6,0) {op};

\draw (v0) edge node[near end] {\OTd{\act{local}}{}{}} (vop);
\draw (v0) edge[bend left,looseness=0] node {\OTd{\act{fetch}}{net \mapsto \act{fetched}}{}} (vd1);
\draw (vd1) edge[blue,bend left,looseness=0] node {\OTd{\act{err}}{hash \mapsto \act{invalid}}{}} (v0);
\draw (v0) edge[bend left,looseness=0] node {\OTd{\act{valid}}{hash \mapsto \act{valid}}{}} (vd2);
\draw (vd2) edge[blue,bend left,looseness=0] node {\OTd{\act{err}}{net \mapsto \act{timeout}}{}} (v0);
\draw (vd1) edge[bend left] node[near end] {\OTd{\act{valid}}{hash \mapsto \act{valid}}{}} (vop);
\draw (vd2) edge[bend right] node[near end,'] {\OTd{\act{push}}{net \mapsto \act{pushed}}{}} (vop);

\end{tikzpicture}
