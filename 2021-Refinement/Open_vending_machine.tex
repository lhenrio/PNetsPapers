\begin{tikzpicture}
\node[state,initial] (v0) at (0,0) {I};
\node[state] (v1) at (-6,0) {T};
\node[state] (v2) at (6,0) {C};
\draw (v0) ++(0,-1.5) edge[near start,init={m \gets 0}] (v0);
\draw (v0) edge[dir=90] node {\OTd{\act{money}\mpar{x}}{mon \mapsto \act{credit}\mpar{x}}{m \gets m + x}} (v0);
\draw (v0) edge[bend left,looseness=0] node {\OTd{\act{tea}\mpar{}}{}[m \geq 150]{m \gets m - 150}} (v1);
\draw (v1) edge[bend left,looseness=0] node {\OTd{\act{serve}\mpar{\mathit{tea}, x}}{serv \mapsto \act{tea}\mpar{x}}{}} (v0);
\draw (v0) edge[bend left,looseness=0] node {\OTd{\act{coffee}\mpar{}}{}[m \geq 150]{m \gets m - 150}} (v2);
\draw (v2) edge[bend left,looseness=0] node {\OTd{\act{serve}\mpar{\mathit{coffee}, x}}{serv \mapsto \act{coffee}\mpar{x}}{}} (v0);
\end{tikzpicture}